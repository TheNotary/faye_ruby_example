<html>

<head>

  <script src='faye/client.js'></script>
</head>
<body>


<script>
chatRoom = {};
chatRoom.createNewChatClient = function(serverAddress, chatPort){
  var client = new Faye.Client('http://' + serverAddress + ':' + chatPort + '/faye', {
    timeout: 120
  });
  client.bind('transport:down', function() {
    //alert('Warning:  The connection has been lost.' + betaMessage);
    chatRoom.setStatusToFailed();
  });
  client.bind('transport:up', function() {
    chatRoom.setStatusToConnected();
  });

  return client;
}


var client = chatRoom.createNewChatClient("localhost", "9292");
var channel = "0001";

client.publish('/' + channel, {text: 'msg'})
</script>

<h1>Example Faye</h1>

<button onclick="client.publish('/' + channel, {text: 'msg'})">Click to transmit Message to all subscribers</button>

<h6>Messages from faye server go here:</h6>
<div class="console"></div>
</body>

</html>
